<form id="password_edit_form" class="form" action="{:U('/Home/Index/editPassword')}" method="Post">
	<style>
		.user-content { width: 300px; }
		.user-content .con-left { width: 30%; float: left; text-align: right; padding-right: 5px; font-weight: 700; height: 50px;}
		.user-content .con-right { width: 70%; float: left; padding-right: 10%; height: 50px;}
	</style>
	<div class="user-content">
		<input type="hidden" name="user_id" value="{$_SESSION['user_info']['user_id']}"/>
		<div class="con-left">原密码：</div>
		<div class="con-right"><input type="password" class="form-control" name="old_pw" /></div>

		<div class="con-left">新密码：</div>
		<div class="con-right"><input type="password" class="form-control" name="new_pw" /></div>

		<div class="con-left">确认新密码：</div>
		<div class="con-right"><input type="password" class="form-control" name="ok_pw" /></div>

		<div style="text-align: center;">
			<input type="submit" class="btn btn-success" name="submit" value="保存">&nbsp;&nbsp;&nbsp;
			<input type="reset"  class="btn btn-warning" value="重置">&nbsp;&nbsp;&nbsp;
			<input type="button" class="btn btn-primary" onclick="javascript:closeDlg();" value="取消">
		</div>
	</div>
</form>
<script type="text/javascript">
	$('#password_edit_form').ajaxForm({success:success,beforeSend:checkForm});
	function success(data){
		if( 0 == data.errNum){
			showSuccess('修改密码成功！');
			setTimeout(function(){
				closeDlg();
			},1000);
		}else{
			showError(data.errMsg);
		}
	}
	function checkForm(){
		if('' === $('input[name=old_pw]').val()){
			showError('原密码不能为空！');
			return false;
		}
		if('' === $('input[name=new_pw]').val()){
			showError('新密码不能为空！');
			return false;
		}
		if($('input[name=ok_pw]').val() != $('input[name=new_pw]').val()){
			showError('两次输入的新密码不一致！');
			return false;
		}
	}
</script>
					
