<div style="max-height: 380px; overflow-y: auto; overflow-x:hidden;">
    <table class="table table-hover table-striped">
        <thead>
        <tr>
            <th>&nbsp;</th>
            <th>居间协议</th>
            <th>服务费</th>
            <th>返费收入</th>
            <th>预付款</th>
            <th>材料费</th>
            <th>其他金额</th>
            <th>支付金额</th>
            <th>支付日期</th>
            <th>状态</th>
        </tr>
        </thead>

        <tbody id="search_result">
        <volist name="receivables_list" id="vo">
            <tr class="receivables_tr">
                <td>&nbsp;</td>
                <td>{$vo['agreementNum']}</td>
                <td>{$vo['commission']}</td>
                <td>{$vo['return_fee']}</td>
                <td>{$vo['deposit']}</td>
                <td>{$vo['packing']}</td>
                <td>{$vo['other_fee']}</td>
                <td>{$vo['pay_money']}</td>
                <td>{$vo['pay_time']|date='Y-m-d',###}</td>
                <td>
                    <if condition="$vo.searchFrom neq 'receivables'">
                        <span class="status_mark">已计算</span>
                        <elseif condition="$vo.achievement_id eq -2"/>
                        <span class="status_mark">无效</span>
                        <span class="btn btn-success btn-sm btn-status" data-toggle="tooltip" title="点击启用" rel="{$vo['receivables_id']}">启用</span>
                        <elseif condition="$vo.achievement_id eq -1"/>
                        <span class="status_mark">待计算</span>
                        <span class="btn btn-default btn-sm btn-status" data-toggle="tooltip" title="点击删除" rel="{$vo['receivables_id']}">删除</span>
                        <else/>
                        <span class="status_mark">已计算</span>
                    </if>
                </td>
            </tr>
        </volist>
        </tbody>
    </table>
</div>
<script>
    $('.btn-status').click(function(){
        if($(this).text()=='删除'){var toStatus=-2;}else{var toStatus=-1;}
        var this_button=$(this);
        var url= "{:U('updataStatus')}/id/"+$(this).attr('rel')+"/toStatus/"+toStatus;
        $.get(url, function (data) {
            if(data.errNum==0){
                showSuccess(data.retData);
                if(this_button.text()=='删除'){
                    this_button.removeClass('btn-default');
                    this_button.addClass('btn-success');
                    this_button.text('启用');
                    this_button.parent().find('.status_mark').text('删除');
                    this_button.parents('.receivables_tr').remove();
                }else{
                    this_button.removeClass('btn-success');
                    this_button.addClass('btn-default');
                    this_button.text('删除');
                    this_button.parent().find('.status_mark').text('待计算');
                }
            }else{
                showError(data.errMsg);
            }
        });
    });
</script>