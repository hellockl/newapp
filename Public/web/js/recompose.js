$(function(){function a(){var a=299,b=setInterval(function(){1==a?(clearInterval(b),$._login_pass_flag=!0,$("#get_verify_code").attr("disabled","true"),$("#get_verify_code").html("重新获取验证码")):(a--,$("#get_verify_code").html(a+"秒后重新发送"))},1e3)}function b(){var a=299,b=setInterval(function(){a--,0==a?(clearInterval(b),$(".shadow").hide(),$(".content_02 .yzm").html("点击重新发送"),$._secondary_flag=!0):($(".content_02 .yzm").html(a+"秒后重新发送"),$(".shadow").show())},1e3)}$(".id").text();$(".psd li").click(function(){var a=$(this).index();$(this).css({color:"#e99e1e","border-bottom":"3px solid #e99e1e"}).siblings().css({color:"#333","border-bottom":"1px solid transparent"}),$(this).parent().parent().next().children().eq(a).show().siblings().hide()});var c,d,e,f,g,h,i,j;$(".one input").blur(function(){return""!=$(".one input").val()?c=!0:($(".b_01").show(),void $(".one input").css("border","1px solid #f00"))}),$(".one input").focus(function(){$(".b_01").hide(),$(".one input").css("border","1px solid #a9a9a9")});var k=/(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^.{6,18}$/;$(".one_01 input").blur(function(){if(""==$(".one_01 input").val())$(".b_03").show(),$(".one_01 input").css("border","1px solid #f00");else{if(k.test($(".one_01 input").val()))return d=!0;$(".b_04").show()}}),$(".one_01 input").focus(function(){$(".b_04,.b_03").hide(),$(".one_01 input").css("border","1px solid #a9a9a9")}),$(".one_02 input").blur(function(){if(""==$(".one_02 input").val())$(".b_05").show(),$(".one_02 input").css("border","1px solid #f00");else{if($(".one_02 input").val()==$(".one_01 input").val())return e=!0;$(".b_06").show()}}),$(".one_02 input").focus(function(){$(".b_05,.b_06").hide(),$(".one_02 input").css("border","1px solid #a9a9a9")});var l=/^1[3578]\d{9}$/;$(".one_03 input").blur(function(){return""==$(".one_03 input").val()?($(".b_07").show(),$(".one_03 input").css("border","1px solid #f00"),f=!1):l.test($(".one_03 input").val())?f=!0:($(".b_08").show(),void(f=!1))}),$("#get_verify_code").click(function(){$(".patterning_modal input").val(""),$(".patterning_img img").attr("src","/captcha.html");var a=parseInt(999*Math.random()+1),b=$(".patterning_img img").attr("src")+"?"+a;$(".patterning_img img").attr("src",b),$._login_pass_flag&&($(".patterning_code").show(),$(".error > img").show())}),$(".error > img").click(function(){$(".patterning_code").hide()}),f=!0,$._login_pass_flag=!0,$(".queue_click").click(function(){return""==$(".patterning_modal input").val()||void 0==$(".patterning_modal input").val()?(layer.msg("验证码不能空"),!1):1==$._login_pass_flag&&void $.ajax({url:"/user/Smsverify/getSmsVerify",type:"POST",data:{username:$("#username").val(),length:6,msg:"修改登录密码",type:0,verify:$(".patterning_modal input").val(),validTime:60},success:function(b){0==b.errorCode?($(".patterning_code").fadeOut(600),layer.msg(b.errorMsg),$._login_pass_flag=!1,a()):layer.msg(b.errorMsg)},error:function(a){layer.msg("发送失败")}})}),$(".one_03 input").focus(function(){$(".b_07,.b_08").hide(),$(".one_03 input").css("border","1px solid #a9a9a9")}),
    $(".next_01").click(function(){
        if(""==$(".one_04 input").val())
            layer.msg("请输入验证码");
        else{
            c&&f&&d&&e&&$.common.ajaxPost("editPassword",
                                        {
                                            old_password:$(".one input").val(),
                                            password:$(".one_01 input").val(),
                                            repassword:$(".one_02 input").val(),
                                            
                                            username:$("#username").val()
                                        },function(a){
                                            0==a.errorCode?(layer.msg("密码修改成功"),setTimeout(function(){window.location.href="__APP__/Home/user/index"},1500)):layer.msg(a.errorMsg)}
                                    )
                        }
                    }),
$(".tow input").blur(function(){return""!=$(".tow input").val()?g=!0:($(".b_09").show(),void $(".tow input").css("border","1px solid #f00"))}),$(".tow input").focus(function(){$(".b_09").hide(),$(".tow input").css("border","1px solid #a9a9a9")});var m=/(?!^[0-9]+$)(?!^[A-z]+$)(?!^[^A-z0-9]+$)^.{6,18}$/;$(".tow_01 input").blur(function(){if(""==$(".tow_01 input").val())$(".b_11").show(),$(".tow_01 input").css("border","1px solid #f00");else{if(m.test($(".tow_01 input").val()))return h=!0;$(".b_12").show()}}),$(".tow_01 input").focus(function(){$(".b_11,.b_12").hide(),$(".tow_01 input").css("border","1px solid #a9a9a9")}),$(".tow_02 input").blur(function(){if(""==$(".tow_02 input").val())$(".b_13").show(),$(".tow_02 input").css("border","1px solid #f00");else{if($(".tow_02 input").val()==$(".tow_01 input").val())return i=!0;$(".b_14").show()}}),$(".tow_02 input").focus(function(){$(".b_13,.b_14").hide(),$(".tow_02 input").css("border","1px solid #a9a9a9")}),$(".tow_03 input").blur(function(){return""==$(".tow_03 input").val()?($(".b_15").show(),$(".tow_03 input").css("border","1px solid #f00"),j=!1):l.test($(".tow_03 input").val())?j=!0:($(".b_16").show(),j=!1)}),$(".yzm_two").click(function(){$(".patterning_modal1 input").val(""),$(".patterning_img1 img").attr("src","/captcha.html");var a=parseInt(999*Math.random()+1),b=$(".patterning_img1 img").attr("src")+"?"+a;$(".patterning_img1 img").attr("src",b),$._secondary_flag&&($(".patterning_code1").show(),$(".error1 > img").show())}),$(".error1 > img").click(function(){$(".patterning_code1").hide()}),j=!0,$._secondary_flag=!0,$(".queue_click1").click(function(){return""==$(".patterning_modal1 input").val()||void 0==$(".patterning_modal input").val()?(layer.msg("验证码不能空"),!1):1==$._secondary_flag&&void $.ajax({url:"/user/Smsverify/getSmsVerify",type:"POST",data:{username:$("#username").val(),length:6,msg:"修改二级密码",type:0,verify:$(".patterning_modal1 input").val(),validTime:60},success:function(a){0==a.errorCode?($(".patterning_code1").fadeOut(600),layer.msg(a.errorMsg),$._secondary_flag=!1,b()):layer.msg(a.errorMsg)}})}),$(".tow_03 input").focus(function(){$(".b_15,.b_16").hide(),$(".tow_03 input").css("border","1px solid #a9a9a9")}),
$(".next_02").click(function(){
    if(""==$(".tow_04 input").val())layer.msg("请输入验证码");else{
        g=!0,g&&h&&i&&j&&$.common.ajaxPost("editAmountPassword",
        {   old_password:$(".tow input").val(),
            password:$(".tow_01 input").val(),
            repassword:$(".tow_02 input").val(),
            
            username:$("#username").val()
        },function(a){0==a.errorCode?(layer.msg("修改成功"),setTimeout(function(){window.location.href="__APP__/Home/user/index"},1500)):layer.msg(a.errorMsg)})}})});